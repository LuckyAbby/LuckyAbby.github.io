---
title: "Git基础知识"
date: 2017-06-08T17:22:25+08:00
---
Git是Git一种分布式版本控制系统，相比于之前的集中式版本控制系统有很明显的区别。
## 区别
集中式版本控制系统(Central VCS)中有一个中央服务器，版本库是存放在中央服务器上，而自己的电脑需要先从中央服务器获取最新的版本，等自己的代码更新完了之后再全部推送给中央服务器。

集中式版本控制系统有个很明显的缺点就是需要联网。

而分布式管理系统却不需要联网，因为每个人的电脑上面都有完整的版本库，没有中央服务器，在未联网的环境下面也可以工作，而当需要和他人合作的时候只需要把自己修改的地方推送给别人即可。

集中式版本控制见下图：
![](http://ojzeprg7w.bkt.clouddn.com/git1.png)

分布式版本控制见下图：
![](http://ojzeprg7w.bkt.clouddn.com/git2.png)

## 基础知识
Git和其他版本控制系统的区别在于它是记录快照而不是比较差异，其他版本控制系统记录的主要是一组基本的文件和这些文件随时间不断修改之后与之前的差异，而Git是当提交数据之后制作全部文件的快照并将这个快照的索引值保存下来。

Git有三种状态，已提交(committed)、已修改(modified)、以及处于暂存区(staged)，由此引申出工作区、暂存区以及版本库的概念。初始化一个Git仓库的时候使用的是 git init 命令，其中会创建一个在文件夹中看不见的目录 .git 就是版本库，可以通过 ls -ah 命令看到 。在版本库中有一个 stage 或者 index 称为暂存区，版本库中还有一个 master 分支，以及指向 master 的一个指针 HEAD ,用下面的图表示就是：
![](http://ojzeprg7w.bkt.clouddn.com/git3.png)

#### 工作区
其中工作区就是本地电脑中的文件，例如
![](http://ojzeprg7w.bkt.clouddn.com/git5.png)
其中我在本地的 gitTest 目录就是我的工作区，我在里面新建了一个文件readme.txt,在其中写入一句话Hello,Git.

#### 版本库
将一个工作区的文件添加到版本库需要经过两步：

1.通过 git add 命令将本地文件的时间戳、长度，当前文档对象的id等信息保存到一个树形目录中即暂存区，就是上图中的index目录。

2.通过 git commit 命令将暂存区中的文件制作快照一次性提交到 master 分支中。
其中 index 中存放的不是自己真正的文件而是时间戳、长度等信息，真正的文件是存放在 objects 对象中的。

具体可见下图
![](http://ojzeprg7w.bkt.clouddn.com/git6.png)

首先通过 git status 可以查看当前工作区的状态，这里因为是刚新建的文件，因此未被追踪，使用 git add 命令加入暂存区使其被追踪，之后通过使用 git commit -m ''命令制作快照，同时自己的暂存区便会被清空。其中''中间的文字是描述性的话，主要是说明这次提交做了什么，方便code review。commit 之后会发现它会提示你一个文件被修改，增加了一行。其实最保险的做法是在 git status 之后使用 git diff 来查看之前都做了什么修改，免得误操作，也十分推荐这种做法。

这些大概是最基本的知识，剩下的一些会在接下来的整理中继续总结。
